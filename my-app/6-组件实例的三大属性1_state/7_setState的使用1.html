<!DOCTYPE html>
<html lang = "en">
<head>
  <meta charset = "UTF-8">
  <!-- Create 2022/3/18 9:14 PM -->
  <title>7_setStateçš„ä½¿ç”¨1</title>
</head>
<body>
  <!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ -->
  <div id = "test"></div>

  <!-- å¼•å…¥reactæ ¸å¿ƒåº“ -->
  <script type = "text/javascript" src = "../js/react.development.js"></script>
  <!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM -->
  <script type = "text/javascript" src = "../js/react-dom.development.js"></script>
  <!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs -->
  <script type = "text/javascript" src = "../js/babel.min.js"></script>

  <!-- æ­¤å¤„ä¸€å®šè¦å†™babelã€‚è¡¨ç¤ºè¿™é‡Œå†™çš„æ˜¯jsxï¼Œè€Œä¸æ˜¯jsï¼Œå¹¶ä¸”æ˜¯ä¾èµ–babelè¿›è¡Œç¿»è¯‘çš„ -->
  <script type = "text/babel">
    // ç¬¬1æ­¥:åˆ›å»ºç»„ä»¶
    class Weather extends React.Component {
      constructor(props) {

        super(props);
        this.state = {
          isHot: true,
        };
        // åˆ†æç­‰å·å³ä¾§:é¡ºç€åŸå‹é“¾æ‰¾åˆ°åŸå‹ä¸­çš„changeWeatheræ–¹æ³•ï¼Œè°ƒç”¨bind()ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶å°†thisä¼ ç»™è¿™ä¸ªæ–°çš„å‡½æ•°ã€‚
        // è¿™ä¸ªæ–°çš„å‡½æ•°çš„åå­—å«ä½œfooï¼ŒfooæŒ‚åœ¨äº†å®ä¾‹å¯¹è±¡èº«ä¸Šã€‚
        this.foo = this.changeWeather.bind(this);
      }

      changeWeather() {
        // changeWeatheræ”¾åœ¨äº†Weatherçš„åŸå‹å¯¹è±¡ä¸Šï¼Œä¾›å®ä¾‹ä½¿ç”¨
        // é€šè¿‡Weatherå®ä¾‹è°ƒç”¨changeWeatherçš„æ—¶å€™ï¼ŒchangeWeatherä¸­çš„thiså°±æ˜¯Weatherå®ä¾‹
        // ç”±äºchangeWeatheræ˜¯ä½œä¸ºonClickçš„å›è°ƒï¼Œæ‰€ä»¥ä¸æ˜¯é€šè¿‡Weatherå®ä¾‹è°ƒç”¨çš„ï¼Œæ˜¯ç›´æ¥è°ƒç”¨ã€‚
        // ç±»ä¸­çš„æ–¹æ³•é»˜è®¤å¼€å¯äº†å±€éƒ¨ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥changeWeatherä¸­çš„thisæ˜¯undefinedã€‚
        // ã€å…·ä½“åˆ†æï¼Œè§"å¤ä¹ /3_ç±»ä¸­çš„æ–¹æ³•thisæŒ‡å‘.html"ã€‘

        // changeWeatheræ”¾åœ¨å“ªé‡Œï¼Ÿ-- Weatherçš„åŸå‹å¯¹è±¡ä¸Šï¼Œä¾›å®ä¾‹ä½¿ç”¨
        // é€šè¿‡Weatherå®ä¾‹è°ƒç”¨changeWeatherçš„æ—¶å€™ï¼ŒchangeWeatherä¸­çš„thiså°±æ˜¯Weatherçš„å®ä¾‹ã€‚
        // Cannot read property 'state' of undefined
        // ç”±äºchangeWeatheræ˜¯ä½œä¸ºonClickçš„å›è°ƒï¼Œä¸æ˜¯é€šè¿‡Weatherå®ä¾‹è°ƒç”¨çš„ï¼Œæ˜¯ç›´æ¥è°ƒç”¨çš„ï¼›ä¸”ç±»ä¸­çš„æ–¹æ³•é»˜è®¤å¼€å¯äº†å±€éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ã€‚
        // æ‰€ä»¥changeWeatherä¸­çš„thisæ˜¯undefined

        // è·å–åŸæ¥çš„isHotå€¼
        const isHot = this.state.isHot;
        // ğŸ“¢æ³¨æ„: çŠ¶æ€(state)ä¸å¯ä»¥ç›´æ¥æ›´æ”¹ï¼Œä¾‹å¦‚ï¼Œthis.state.isHot = !isHot <-- é”™è¯¯çš„âŒ

        this.setState({isHot: !isHot});
      }

      render() {
        return (
          <h2 onClick = {this.foo}>ä»Šå¤©å¤©æ°”å¾ˆ{this.state.isHot ? "ç‚çƒ­" : "å‡‰çˆ½"}</h2>
        )
      }
    }

    // ç¬¬2æ­¥:æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢
    ReactDOM.render(<Weather/>, document.getElementById('test'));

  </script>
</body>

</html>